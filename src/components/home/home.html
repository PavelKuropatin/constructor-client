<div layout="row">
    <div flex="20" class="sidenav-container">
        <sidenav state-objects="home.stateObjects"
                 active-state="home.activeState"></sidenav>
    </div>
    <div class="schema-container" flex="80">
        <md-toolbar class="md-hue-2">
            <div class="md-toolbar-tools">
                <h2 flex md-truncate>Current position [{{home.pos_x}}, {{home.pos_y}}]</h2>
                <md-button class="md-icon-button" aria-label="Favorite">
                    <md-icon class="material-icons">face</md-icon>
                </md-button>
                <md-button class="md-raised" ng-click="home.saveStateObjects()">Save</md-button>
                <md-button class="md-raised" ng-click="home.loadStateObjects()">Load</md-button>
                <md-slider min="0" max="200" ng-model="home.zoomlevel" step="10" aria-label="red" id="red-slider"
                           class="md-warn">
                </md-slider>
            </div>
        </md-toolbar>

        <div id="container">
            <js-plumb-canvas on-connection="home.onConnection"
                             x="home.pos_x"
                             y="home.pos_y"
                             zoom="home.zoomlevel">
                <js-plumb-object class="state_window"
                                 state-object="state"
                                 ng-style="{ 'left':state.x, 'top':state.y }"
                                 ng-repeat="state in home.stateObjects">
                    <h3 ng-click="home.setActiveState(state)">{{state.name}}</h3>
                    {{state.template}}
                    <js-plumb-endpoint class="endpoint-style-right"
                                       ng-repeat="endpoint in state.sources"
                                       anchor="RightMiddle"
                                       uuid="{{endpoint.uuid}}"
                                       settings="home.sourceEndpointStyle">
                        <js-plumb-connection ng-click="setActiveConnection($index)"
                                             ng-repeat="connection in endpoint.connections"
                                             ng-model="connection">
                            <div class="connection-label">
                <span ng-if="connection.type !== 'Action'"
                      class="glyphicon glyphicon-retweet connection-label-active"
                      title="Transition To {{connection.uuid}}">
                </span>
                                <span ng-if="connection.type === 'Action'"
                                      class="glyphicon glyphicon-flash connection-label-inactive"
                                      title="Trigger Action {{connection.uuid}}"></span>
                            </div>
                        </js-plumb-connection>
                    </js-plumb-endpoint>
                    <js-plumb-endpoint class="endpoint-style-left"
                                       ng-repeat="endpoint in state.targets"
                                       anchor="LeftMiddle"
                                       uuid="{{endpoint.uuid}}"
                                       settings="home.targetEndpointStyle"></js-plumb-endpoint>
                </js-plumb-object>
            </js-plumb-canvas>
        </div>
    </div>
</div>
