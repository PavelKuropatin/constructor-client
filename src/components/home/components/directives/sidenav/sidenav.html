<md-card class="sidenav">
    <md-card-header>
        <md-card-header-text>
            <div class="title-text">States</div>
        </md-card-header-text>
        <md-button class="md-icon-button" ng-click="newState(stateObjects, state)">
            <md-icon>playlist_add</md-icon>
        </md-button>
        <md-button class="md-icon-button" ng-click="showjson=!showjson">
            <md-icon ng-if="!showjson">create</md-icon>
            <md-icon ng-if="showjson">remove</md-icon>
        </md-button>
    </md-card-header>
    <md-divider></md-divider>
    <md-card-content ng-if="stateObjects.length >= 1 || showjson">
        <md-card ng-if="!showjson" ng-repeat="state in stateObjects">
            <md-card-header>
                <md-card-header-text>
                    <div layout="column">
                        <span class="title-text">{{state.name}}</span>
                        <span class="medium-text">
                                Position: [{{state.x| number}}, {{state.y| number}}]
                            </span>
                    </div>
                </md-card-header-text>
                <md-button class="md-icon-button" ng-click="setActiveState(state)">
                    <md-icon ng-if="activeState !== state">visibility</md-icon>
                    <md-icon ng-if="activeState === state">visibility_off</md-icon>
                </md-button>
                <md-button class="md-icon-button" ng-click="removeState(stateObjects, state)">
                    <md-icon>delete_sweep</md-icon>
                </md-button>
            </md-card-header>
            <md-card-content ng-hide="activeState != state">
                <div layout="row" layout-align="space-between">
                    <md-input-container>
                        <label>Name of State</label>
                        <input name="stateName"
                               ng-model="state.name">
                    </md-input-container>
                    <md-button class="md-icon-button" ng-click="swapEndpointState(state)">
                        <md-icon>compare_arrows</md-icon>
                    </md-button>
                </div>
                <div layout="row" layout-align="space-between">
                    <md-input-container>
                        <label>Template</label>
                        <md-select name="templateName" ng-model="state.template">
                            <md-option ng-value="partial" ng-repeat="partial in partials">{{partial}}</md-option>
                        </md-select>
                    </md-input-container>
                    <md-input-container ng-if="isActionState(state)">
                        <label>Color</label>
                        <md-select name="colorName" ng-model="state.color">
                            <md-option ng-value="color.color" ng-repeat="color in colors">{{color.abbr}}</md-option>
                        </md-select>
                    </md-input-container>
                </div>
                <div layout="row" ng-if="isActionState(state)">
                    <md-input-container>
                        <label>v1</label>
                        <input ng-model="state.v1"/>
                    </md-input-container>
                    <md-input-container>
                        <label>v2</label>
                        <input ng-model="state.v2"/>
                    </md-input-container>
                    <md-input-container>
                        <label>v3</label>
                        <input ng-model="state.v3"/>
                    </md-input-container>
                    <md-input-container>
                        <label>v4</label>
                        <input ng-model="state.v4"/>
                    </md-input-container>
                </div>
                <div layout="row" ng-if="isCircleState(state)">
                    <md-input-container>
                        <label>v5</label>
                        <input ng-model="state.v5"/>
                    </md-input-container>
                    <md-input-container>
                        <label>v6</label>
                        <input ng-model="state.v6"/>
                    </md-input-container>
                </div>
                <md-card ng-repeat="source in state.sources">
                    <md-card-header>
                        <md-card-header-text>
                            <div layout="column">
                                <div class="big-text">UUID - {{source.uuid}}</div>
                                <small class="small-text">SOURCE</small>
                            </div>
                        </md-card-header-text>
                        <md-button class="md-icon-button" ng-click="removeIndex($index, state.sources)">
                            <md-icon>delete_sweep</md-icon>
                        </md-button>
                    </md-card-header>
                    <md-card-content ng-if="source.connections.length"
                                     ng-class="{'active-state': connection.mouseover}"
                                     ng-repeat="connection in source.connections">
                        <md-card>
                            <md-card-header>
                                <md-card-header-text>
                                    <div class="big-text">Connection</div>
                                </md-card-header-text>
                                <md-button class="md-icon-button"
                                           ng-click="removeIndex($index, source.connections)">
                                    <md-icon>delete_sweep</md-icon>
                                </md-button>
                            </md-card-header>
                            <md-card-content>
                                <md-input-container>
                                    <label>Condition</label>
                                    <input name="conditionName"
                                           ng-model="connection.condition">
                                </md-input-container>
                            </md-card-content>
                        </md-card>
                    </md-card-content>
                </md-card>
                <md-card ng-repeat="target in state.targets">
                    <md-card-header>
                        <md-card-header-text>
                            <div layout="column">
                                <div class="big-text">UUID - {{target.uuid}}</div>
                                <small class="small-text">TARGET</small>
                            </div>
                        </md-card-header-text>
                        <md-button class="md-icon-button" ng-click="removeIndex($index, state.targets)">
                            <md-icon>delete_sweep</md-icon>
                        </md-button>
                    </md-card-header>
                </md-card>
            </md-card-content>
        </md-card>
        <md-card ng-if="showjson">
            <textarea class="json-container">{{stateObjects | json }}</textarea>
        </md-card>
    </md-card-content>
</md-card>
